<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动画 | VF Engine</title>
    <meta name="description" content="VF Engine 中文文档">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/vf-docs/favicon.png">
  <link rel="manifest" href="/vf-docs/manifest.json">
  <meta name="theme-color" content="#ff6600">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/vf-docs/vf-docs/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/vf-docs/vf-docs/icons/safari-pinned-tab.svg" color="#ff6600">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/vf-docs/assets/css/0.styles.a0ba49ca.css" as="style"><link rel="preload" href="/vf-docs/assets/js/app.4298bfd2.js" as="script"><link rel="preload" href="/vf-docs/assets/js/2.402d1a55.js" as="script"><link rel="preload" href="/vf-docs/assets/js/34.f80532ee.js" as="script"><link rel="prefetch" href="/vf-docs/assets/js/10.55cb4300.js"><link rel="prefetch" href="/vf-docs/assets/js/11.6e4d2c56.js"><link rel="prefetch" href="/vf-docs/assets/js/12.301f3923.js"><link rel="prefetch" href="/vf-docs/assets/js/13.c2070183.js"><link rel="prefetch" href="/vf-docs/assets/js/14.a0501380.js"><link rel="prefetch" href="/vf-docs/assets/js/15.a2393d0e.js"><link rel="prefetch" href="/vf-docs/assets/js/16.dd682a37.js"><link rel="prefetch" href="/vf-docs/assets/js/17.28c2d9f8.js"><link rel="prefetch" href="/vf-docs/assets/js/18.d84e08cd.js"><link rel="prefetch" href="/vf-docs/assets/js/19.23c01842.js"><link rel="prefetch" href="/vf-docs/assets/js/20.4ca7cd72.js"><link rel="prefetch" href="/vf-docs/assets/js/21.b6290217.js"><link rel="prefetch" href="/vf-docs/assets/js/22.539759b9.js"><link rel="prefetch" href="/vf-docs/assets/js/23.3ba5c73b.js"><link rel="prefetch" href="/vf-docs/assets/js/24.94484641.js"><link rel="prefetch" href="/vf-docs/assets/js/25.d1ec3d15.js"><link rel="prefetch" href="/vf-docs/assets/js/26.685fd652.js"><link rel="prefetch" href="/vf-docs/assets/js/27.dd20b07c.js"><link rel="prefetch" href="/vf-docs/assets/js/28.2595db90.js"><link rel="prefetch" href="/vf-docs/assets/js/29.fbf256e6.js"><link rel="prefetch" href="/vf-docs/assets/js/3.6ccbac4c.js"><link rel="prefetch" href="/vf-docs/assets/js/30.27a22ef0.js"><link rel="prefetch" href="/vf-docs/assets/js/31.3e29f46a.js"><link rel="prefetch" href="/vf-docs/assets/js/32.109a9e07.js"><link rel="prefetch" href="/vf-docs/assets/js/33.40f7d22b.js"><link rel="prefetch" href="/vf-docs/assets/js/35.5ec90611.js"><link rel="prefetch" href="/vf-docs/assets/js/36.6d59d18f.js"><link rel="prefetch" href="/vf-docs/assets/js/37.6ddd1094.js"><link rel="prefetch" href="/vf-docs/assets/js/38.cc6d1a9b.js"><link rel="prefetch" href="/vf-docs/assets/js/39.270847bb.js"><link rel="prefetch" href="/vf-docs/assets/js/4.4e3faa87.js"><link rel="prefetch" href="/vf-docs/assets/js/40.0949fbe3.js"><link rel="prefetch" href="/vf-docs/assets/js/41.5d7bbcf5.js"><link rel="prefetch" href="/vf-docs/assets/js/42.7cf129a3.js"><link rel="prefetch" href="/vf-docs/assets/js/43.d3600ec1.js"><link rel="prefetch" href="/vf-docs/assets/js/44.2f892456.js"><link rel="prefetch" href="/vf-docs/assets/js/45.7d25e5ab.js"><link rel="prefetch" href="/vf-docs/assets/js/46.d73ef168.js"><link rel="prefetch" href="/vf-docs/assets/js/47.fedc323a.js"><link rel="prefetch" href="/vf-docs/assets/js/48.f353cc96.js"><link rel="prefetch" href="/vf-docs/assets/js/49.57128152.js"><link rel="prefetch" href="/vf-docs/assets/js/5.e5573dec.js"><link rel="prefetch" href="/vf-docs/assets/js/50.e2f7f2f7.js"><link rel="prefetch" href="/vf-docs/assets/js/51.a1235106.js"><link rel="prefetch" href="/vf-docs/assets/js/52.8c9ca968.js"><link rel="prefetch" href="/vf-docs/assets/js/53.8e924062.js"><link rel="prefetch" href="/vf-docs/assets/js/54.3a173067.js"><link rel="prefetch" href="/vf-docs/assets/js/55.a336d722.js"><link rel="prefetch" href="/vf-docs/assets/js/56.04c12777.js"><link rel="prefetch" href="/vf-docs/assets/js/57.612acd33.js"><link rel="prefetch" href="/vf-docs/assets/js/58.6d83927f.js"><link rel="prefetch" href="/vf-docs/assets/js/59.cc1d787e.js"><link rel="prefetch" href="/vf-docs/assets/js/6.2462f849.js"><link rel="prefetch" href="/vf-docs/assets/js/60.0b060ee5.js"><link rel="prefetch" href="/vf-docs/assets/js/61.e23e4f7e.js"><link rel="prefetch" href="/vf-docs/assets/js/62.8f485af8.js"><link rel="prefetch" href="/vf-docs/assets/js/63.0814b049.js"><link rel="prefetch" href="/vf-docs/assets/js/64.7e8f4516.js"><link rel="prefetch" href="/vf-docs/assets/js/65.ef150bf9.js"><link rel="prefetch" href="/vf-docs/assets/js/66.fae4860c.js"><link rel="prefetch" href="/vf-docs/assets/js/67.f2200b05.js"><link rel="prefetch" href="/vf-docs/assets/js/68.2d23703f.js"><link rel="prefetch" href="/vf-docs/assets/js/69.c4bd3a84.js"><link rel="prefetch" href="/vf-docs/assets/js/7.b8ae8081.js"><link rel="prefetch" href="/vf-docs/assets/js/70.815aa09f.js"><link rel="prefetch" href="/vf-docs/assets/js/71.e1ee8212.js"><link rel="prefetch" href="/vf-docs/assets/js/72.3751867b.js"><link rel="prefetch" href="/vf-docs/assets/js/73.e2c4b935.js"><link rel="prefetch" href="/vf-docs/assets/js/74.f862cd5d.js"><link rel="prefetch" href="/vf-docs/assets/js/75.c99ab1eb.js"><link rel="prefetch" href="/vf-docs/assets/js/76.326b8676.js"><link rel="prefetch" href="/vf-docs/assets/js/77.8ef2699b.js"><link rel="prefetch" href="/vf-docs/assets/js/78.68464611.js"><link rel="prefetch" href="/vf-docs/assets/js/79.955656a6.js"><link rel="prefetch" href="/vf-docs/assets/js/8.8477d2ec.js"><link rel="prefetch" href="/vf-docs/assets/js/80.3c62edc9.js"><link rel="prefetch" href="/vf-docs/assets/js/81.1a815712.js"><link rel="prefetch" href="/vf-docs/assets/js/82.177cda4e.js"><link rel="prefetch" href="/vf-docs/assets/js/83.1c1fc983.js"><link rel="prefetch" href="/vf-docs/assets/js/9.5212cab3.js">
    <link rel="stylesheet" href="/vf-docs/assets/css/0.styles.a0ba49ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vf-docs/" class="home-link router-link-active"><img src="/vf-docs/logo.png" alt="VF Engine" class="logo"> <span class="site-name can-hide">VF Engine</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/vipkid-edu/" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/vipkid-edu/" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>关于VF</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vf-docs/about/engine.html" class="sidebar-link">引擎介绍</a></li><li><a href="/vf-docs/about/dev.html" class="sidebar-link">如何开发？</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>快速上手</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vf-docs/getstart/introduction.html" class="sidebar-link">安装运行</a></li><li><a href="/vf-docs/getstart/demo.html" class="sidebar-link">示例介绍</a></li><li><a href="/vf-docs/getstart/advanced-demo.html" class="sidebar-link">进阶教程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>开发指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vf-docs/handbook/option.html" class="sidebar-link">配置选项</a></li><li><a href="/vf-docs/handbook/data.html" class="sidebar-link">数据格式</a></li><li><a href="/vf-docs/handbook/resource.html" class="sidebar-link">资源</a></li><li><a href="/vf-docs/handbook/component.html" class="sidebar-link">组件</a></li><li><a href="/vf-docs/handbook/style.html" class="sidebar-link">属性与样式</a></li><li><a href="/vf-docs/handbook/scene.html" class="sidebar-link">场景</a></li><li><a href="/vf-docs/handbook/sound.html" class="sidebar-link">声音</a></li><li><a href="/vf-docs/handbook/var.html" class="sidebar-link">变量</a></li><li><a href="/vf-docs/handbook/event.html" class="sidebar-link">事件</a></li><li><a href="/vf-docs/handbook/action.html" class="sidebar-link">VFX(动作脚本)</a></li><li><a href="/vf-docs/handbook/click.html" class="sidebar-link">交互</a></li><li><a href="/vf-docs/handbook/drag.html" class="sidebar-link">拖动</a></li><li><a href="/vf-docs/handbook/animation.html" class="active sidebar-link">动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#数据定义" class="sidebar-link">数据定义</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#创建动画" class="sidebar-link">创建动画</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#动画数据解析" class="sidebar-link">动画数据解析</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#可以添加动画的属性" class="sidebar-link">可以添加动画的属性</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#缓动曲线" class="sidebar-link">缓动曲线</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#动画实例" class="sidebar-link">动画实例</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#理解duration和loop" class="sidebar-link">理解duration和loop</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#多个动画" class="sidebar-link">多个动画</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#动画中的事件" class="sidebar-link">动画中的事件</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#事件时间轴" class="sidebar-link">事件时间轴</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#路径动画" class="sidebar-link">路径动画</a></li><li class="sidebar-sub-header"><a href="/vf-docs/handbook/animation.html#动画模板" class="sidebar-link">动画模板</a></li></ul></li><li><a href="/vf-docs/handbook/filter.html" class="sidebar-link">滤镜</a></li><li><a href="/vf-docs/handbook/interface.html" class="sidebar-link">接口</a></li><li><a href="/vf-docs/handbook/gui-plugs.html" class="sidebar-link">组件插件</a></li><li><a href="/vf-docs/handbook/filter-plugs.html" class="sidebar-link">滤镜插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>常用组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vf-docs/gui/label.html" class="sidebar-link">文字 Label</a></li><li><a href="/vf-docs/gui/image.html" class="sidebar-link">图片 Image</a></li><li><a href="/vf-docs/gui/button.html" class="sidebar-link">按钮 Button</a></li><li><a href="/vf-docs/gui/checkbox.html" class="sidebar-link">单/复选框 CheckBox</a></li><li><a href="/vf-docs/gui/rect.html" class="sidebar-link">矩形 Rect</a></li><li><a href="/vf-docs/gui/circle.html" class="sidebar-link">圆形 Circle</a></li><li><a href="/vf-docs/gui/textInput.html" class="sidebar-link">输入文本 TextInput</a></li><li><a href="/vf-docs/gui/slider.html" class="sidebar-link">滑动条 Slider</a></li><li><a href="/vf-docs/gui/connectLine.html" class="sidebar-link">连线 ConnectLine</a></li><li><a href="/vf-docs/gui/spriteAnimated.html" class="sidebar-link">序列帧 SpriteAnimated</a></li><li><a href="/vf-docs/gui/ScrollBar.html" class="sidebar-link">滚动条 ScrollBar</a></li><li><a href="/vf-docs/gui/audio.html" class="sidebar-link">音频 Audio</a></li><li><a href="/vf-docs/gui/followLine.html" class="sidebar-link">画线板 FollowLine</a></li><li><a href="/vf-docs/gui/Tracing.html" class="sidebar-link">笔画教学 Tracing</a></li><li><a href="/vf-docs/gui/textChoice.html" class="sidebar-link">文本选择插件 TextChoice</a></li><li><a href="/vf-docs/gui/textFillBlanks.html" class="sidebar-link">文本填空插件 TextFillBlanks</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>常见问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vf-docs/questions/" class="sidebar-link">常见问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="动画"><a href="#动画" class="header-anchor">#</a> 动画</h1> <p>动画就是组件属性随时间的变化。动画数据中包含了时间轴数据和帧数据。动画数据和组件数据分离，通过组合的方式表示动画，可以更灵活方便的制作动画。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>动画使用的时间单位是帧，不是秒！</li> <li>每帧的时间由配置文件中的fps属性设置，fps表示每秒多少帧。</li> <li>如果不设置fps， 默认的fps是30， 它表示一秒钟是30帧， 一帧相当于 1/30 = 33.33（毫秒）</li></ul></div> <h2 id="数据定义"><a href="#数据定义" class="header-anchor">#</a> 数据定义</h2> <ul><li>动画数据的定义：</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IAnimation</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    duration<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    autoPlay<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    loop<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    children<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> ISubAnimation <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>子动画数据的定义：</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ISubAnimation</span> <span class="token punctuation">{</span>
    duration<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    loop<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    timelines<span class="token operator">:</span> ITimeline<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>时间轴数据的定义：</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ITimeline</span> <span class="token punctuation">{</span>
    <span class="token keyword">type</span><span class="token operator">:</span> TimelineType<span class="token punctuation">;</span>
    loop<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    frames<span class="token operator">:</span> IFrame<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>时间轴的类型：</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token keyword">enum</span> TimelineType <span class="token punctuation">{</span>
    <span class="token constant">X</span> <span class="token operator">=</span> <span class="token string">'x'</span><span class="token punctuation">,</span>
    <span class="token constant">Y</span> <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">,</span>
    <span class="token constant">SCALE_X</span> <span class="token operator">=</span> <span class="token string">'scaleX'</span><span class="token punctuation">,</span>
    <span class="token constant">SCALE_Y</span> <span class="token operator">=</span> <span class="token string">'scaleY'</span><span class="token punctuation">,</span>
    <span class="token constant">ROTATION</span> <span class="token operator">=</span> <span class="token string">'rotation'</span><span class="token punctuation">,</span>
    <span class="token constant">COLOR</span> <span class="token operator">=</span> <span class="token string">'color'</span><span class="token punctuation">,</span>
    <span class="token constant">ALPHA</span> <span class="token operator">=</span> <span class="token string">'alpha'</span><span class="token punctuation">,</span>
    <span class="token constant">VISIBLE</span> <span class="token operator">=</span> <span class="token string">'visible'</span><span class="token punctuation">,</span>
    <span class="token constant">TEXT</span> <span class="token operator">=</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
    <span class="token constant">PROGRESS</span> <span class="token operator">=</span> <span class="token string">'progress'</span><span class="token punctuation">,</span>
    <span class="token constant">SKEW_X</span> <span class="token operator">=</span> <span class="token string">'skewX'</span><span class="token punctuation">,</span>
    <span class="token constant">SKEW_Y</span> <span class="token operator">=</span> <span class="token string">'skewY'</span><span class="token punctuation">,</span>
    <span class="token constant">PLAY</span> <span class="token operator">=</span> <span class="token string">'play'</span><span class="token punctuation">,</span>
    <span class="token constant">VOLUME</span> <span class="token operator">=</span> <span class="token string">'volume'</span><span class="token punctuation">,</span>
    <span class="token constant">ENABLED</span> <span class="token operator">=</span> <span class="token string">'enabled'</span><span class="token punctuation">,</span>
    <span class="token constant">FITERBLUR</span> <span class="token operator">=</span> <span class="token string">'filterBlur'</span><span class="token punctuation">,</span>
    <span class="token constant">EVENT</span> <span class="token operator">=</span> <span class="token string">'event'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>帧数据的定义：</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IFrame</span> <span class="token punctuation">{</span>
    frame<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    curve<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="创建动画"><a href="#创建动画" class="header-anchor">#</a> 创建动画</h2> <p>现在我们来创建一个动画，让图片动起来。</p> <ol><li>创建一个自定义组件， 自定义组件的children中有一个id是loadingBar的图片。</li> <li>给这个图片加一个动画</li> <li>给组件加一个animations节点，如下：</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoPlay&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;loadingBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="动画数据解析"><a href="#动画数据解析" class="header-anchor">#</a> 动画数据解析</h2> <ul><li><p>动画只能加在自定义组件中。</p></li> <li><p>animations节点</p> <ul><li>name 是动画的名称，在一个组件可以存在多个动画，每个动画的名称是唯一的。</li> <li>duration 表示动画的持续时间，单位是帧。</li> <li>autoPlay 表示是否在加入舞台时就自动播放这个动画，如果一个组件包含多个动画，只能有一个动画的autoPlay为true。</li> <li>loop表示是否循环播放。 如果loop是ture，当动画到达最后一帧时会跳到第一帧，所以当loop是true时，动画播放完毕后不会停留在最后一帧上。</li> <li>children 里面包含了这个组件中所有子组件的动画的时间轴信息。所以动画只能加在组件的孩子上，不能加到组件自己身上。</li></ul></li> <li><p>child节点</p> <ul><li>child用键值对表示。</li> <li>每个child中的动画也有 duration， loop的属性，它作用的范围是这个child内。</li> <li>timelines表示每个属性的变化，一个属性的变化是一个timeline。</li></ul></li> <li><p>timeline节点</p> <ul><li>timeline中 type表示变化的属性。并不是所有的属性都可以有timeline，只有部分属性可以有。具体哪些属性可以有参见《时间轴的类型》。</li> <li>timeline中也有loop属性，它的作用范围在这一个timeline内。</li> <li>frames表示 在某一时间点上，该属性变化的数值。</li></ul></li> <li><p>frame节点</p> <ul><li>frame中 frame表示时间点，单位是帧。</li> <li>curve表示变化的缓动曲线，具体含义见后面的表格《动画曲线的类型》。</li> <li>value 表示在这一时间点该参数的值。</li></ul></li> <li><p>总体上，这一段表示，该组件有一个叫‘default’的动画，这段动画有2秒钟（因为fps是30，表示一秒钟是30帧，整段动画是60帧，就是2秒种），图片loadingBar的x坐标从100 变化到200， 变化是先快后慢。（由curve属性控制）</p></li> <li><p>这里loop有多个，duration也有多个，通过灵活的组合可以让动画呈现不同的效果。后面《理解duration和loop》的部分有更详细的解释。</p></li> <li><p>如果想让动画播放完毕后停留在最后的状态，所有的loop都必须是false。</p></li></ul> <h2 id="可以添加动画的属性"><a href="#可以添加动画的属性" class="header-anchor">#</a> 可以添加动画的属性</h2> <table><thead><tr><th>属性</th> <th style="text-align:center;">值类型</th> <th style="text-align:center;">含义</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td>x</td> <td style="text-align:center;">number</td> <td style="text-align:center;">x坐标</td> <td style="text-align:center;"></td></tr> <tr><td>y</td> <td style="text-align:center;">number</td> <td style="text-align:center;">y坐标</td> <td style="text-align:center;"></td></tr> <tr><td>scaleX</td> <td style="text-align:center;">number</td> <td style="text-align:center;">x方向缩放</td> <td style="text-align:center;"></td></tr> <tr><td>scaleY</td> <td style="text-align:center;">number</td> <td style="text-align:center;">y方向缩放</td> <td style="text-align:center;"></td></tr> <tr><td>rotation</td> <td style="text-align:center;">number</td> <td style="text-align:center;">旋转</td> <td style="text-align:center;"></td></tr> <tr><td>color</td> <td style="text-align:center;">number</td> <td style="text-align:center;">颜色</td> <td style="text-align:center;"></td></tr> <tr><td>alpha</td> <td style="text-align:center;">number</td> <td style="text-align:center;">不透明度</td> <td style="text-align:center;">0是全透明，1是不透明</td></tr> <tr><td>visible</td> <td style="text-align:center;">boolean</td> <td style="text-align:center;">是否可见</td> <td style="text-align:center;"></td></tr> <tr><td>text</td> <td style="text-align:center;">string</td> <td style="text-align:center;">文本</td> <td style="text-align:center;">仅在Label组件中使用</td></tr> <tr><td>progress</td> <td style="text-align:center;">number</td> <td style="text-align:center;">进度</td> <td style="text-align:center;">仅在Label组件中使用，用于制作打字机效果</td></tr> <tr><td>enabled</td> <td style="text-align:center;">boolean</td> <td style="text-align:center;">是否可点击</td> <td style="text-align:center;"></td></tr> <tr><td>filterBlur</td> <td style="text-align:center;">number</td> <td style="text-align:center;">模糊程度</td> <td style="text-align:center;"></td></tr> <tr><td>event</td> <td style="text-align:center;">striing</td> <td style="text-align:center;">事件</td> <td style="text-align:center;"></td></tr></tbody></table> <h2 id="缓动曲线"><a href="#缓动曲线" class="header-anchor">#</a> 缓动曲线</h2> <ul><li>缓动曲线的数据是一个数组[],数组只包含一个数字，就是缓动曲线的type。
之所以设计成数组，是为了以后支持自定义的贝塞尔曲线。如果是贝塞尔曲线，数组就会包含多个数字。</li> <li>缓动曲线表示变化的快慢，缓动曲线的数据写在帧上，
当一个帧上有缓动曲线时，它表示：从这一帧到下一帧之间变化的缓动曲线，如果该帧是最后一帧，那么缓动曲线不起作用。</li> <li>并不是所有的帧都支持缓动曲线，不是连续变化的属性的时间轴不支持缓动曲线，例如visible属性，event属性 text属性不支持缓动曲线。</li> <li>例如  Linear（type是1）表示线性变化，就是匀速运动；EaseOutQuad（type是2） 表示先快后慢。</li></ul> <h3 id="动画曲线的类型"><a href="#动画曲线的类型" class="header-anchor">#</a> 动画曲线的类型</h3> <table><thead><tr><th>类型</th> <th style="text-align:center;">type</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td>None</td> <td style="text-align:center;">0</td> <td style="text-align:center;">无效果，突变</td></tr> <tr><td>Linear</td> <td style="text-align:center;">1</td> <td style="text-align:center;">线性变化</td></tr> <tr><td>EaseOutQuad</td> <td style="text-align:center;">2</td> <td style="text-align:center;">淡出</td></tr> <tr><td>EaseInQuad</td> <td style="text-align:center;">3</td> <td style="text-align:center;">淡入</td></tr> <tr><td>EaseInOutQuad</td> <td style="text-align:center;">4</td> <td style="text-align:center;">淡入淡出</td></tr> <tr><td>EaseInCubic</td> <td style="text-align:center;">5</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutCubic</td> <td style="text-align:center;">6</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutCubic</td> <td style="text-align:center;">7</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInQuart</td> <td style="text-align:center;">8</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutQuart</td> <td style="text-align:center;">9</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutQuart</td> <td style="text-align:center;">10</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInQuint</td> <td style="text-align:center;">11</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutQuint</td> <td style="text-align:center;">12</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutQuint</td> <td style="text-align:center;">13</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInSine</td> <td style="text-align:center;">14</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutSine</td> <td style="text-align:center;">15</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutSine</td> <td style="text-align:center;">16</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInExpo</td> <td style="text-align:center;">17</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutExpo</td> <td style="text-align:center;">18</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutExpo</td> <td style="text-align:center;">19</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInCirc</td> <td style="text-align:center;">20</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutCirc</td> <td style="text-align:center;">21</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutCirc</td> <td style="text-align:center;">22</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutBounce</td> <td style="text-align:center;">23</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInBack</td> <td style="text-align:center;">24</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutBack</td> <td style="text-align:center;">25</td> <td style="text-align:center;"></td></tr> <tr><td>EaseInOutBack</td> <td style="text-align:center;">26</td> <td style="text-align:center;"></td></tr> <tr><td>Elastic</td> <td style="text-align:center;">27</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutElastic</td> <td style="text-align:center;">28</td> <td style="text-align:center;"></td></tr> <tr><td>EaseOutElasticTmp</td> <td style="text-align:center;">29</td> <td style="text-align:center;"></td></tr> <tr><td>SwingFromTo</td> <td style="text-align:center;">30</td> <td style="text-align:center;"></td></tr> <tr><td>SwingFrom</td> <td style="text-align:center;">31</td> <td style="text-align:center;"></td></tr> <tr><td>SwingTo</td> <td style="text-align:center;">32</td> <td style="text-align:center;"></td></tr> <tr><td>Bounce</td> <td style="text-align:center;">33</td> <td style="text-align:center;"></td></tr> <tr><td>BouncePast</td> <td style="text-align:center;">34</td> <td style="text-align:center;"></td></tr> <tr><td>EaseFromTo</td> <td style="text-align:center;">35</td> <td style="text-align:center;"></td></tr> <tr><td>EaseFrom</td> <td style="text-align:center;">36</td> <td style="text-align:center;"></td></tr> <tr><td>EaseTo</td> <td style="text-align:center;">37</td> <td style="text-align:center;"></td></tr> <tr><td>Sinusoidal</td> <td style="text-align:center;">38</td> <td style="text-align:center;"></td></tr> <tr><td>Reverse</td> <td style="text-align:center;">39</td> <td style="text-align:center;"></td></tr> <tr><td>Wobble</td> <td style="text-align:center;">40</td> <td style="text-align:center;"></td></tr> <tr><td>Spring</td> <td style="text-align:center;">41</td> <td style="text-align:center;"></td></tr></tbody></table> <h2 id="动画实例"><a href="#动画实例" class="header-anchor">#</a> 动画实例</h2> <p>1.创建一个从左到右的移动动画</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoPlay&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;loadingBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>2.创建一个从上到下的移动动画</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoPlay&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;loadingBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>3.创建一个从左上到右下的移动动画</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoPlay&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;loadingBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="理解duration和loop"><a href="#理解duration和loop" class="header-anchor">#</a> 理解duration和loop</h2> <ul><li><p>loop</p> <ul><li><p>loop表示是否是循环动画，当loop是ture时，时间轴永远也不会停留在最后一帧，当时间轴走到最后一帧时会立刻跳转到第一帧。
例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在这段时间轴动画中，y属性的值永远也不会等于200，当帧数走到60时，会跳到第0帧的位置，此时y属性是100</p></li> <li><p>在一段动画的配置中，有三个节点，animation节点，child节点和 timeline节点，animation节点包含一个或者多个child节点，一个child节点包含多个timeline节点。这三个节点都可以有自己的loop属性。它们管控的范围不一样。</p></li></ul></li> <li><p>duration</p> <ul><li><p>duration表示这段动画的长度，单位是帧。如果不指定duration，那么duration就是帧的最大长度。</p></li> <li><p>在一段动画的配置中，有三个节点，animation节点，child节点和 timeline节点，animation节点包含一个或者多个child节点，一个child节点包含多个timeline节点。这三个节点中只有animation节点和child节点可以指定duration，timeline的长度由里面包含的帧决定。</p></li> <li><p>如果child节点不指定duration。那么这个child的长度是它包含的timline节点中长度最大的那个决定。</p></li> <li><p>如果animation节点不指定duration，那么这个animation的长度由它包含的child节点中长度最大的那个决定。</p></li></ul></li> <li><p>通过duration和loop的组合使用可以配置出丰富的动画效果。</p> <p>例如：做一个小车从左到右移动的动画，车身从左到右，车轮子不停转动，我们可以把车轮子设置成循环动画，车身的的动画设置为非循环动画，如下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoPlay&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;车身&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;轮子&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rotation&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">360</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>这里轮子的动画是loop是true，它的动画只需要30帧即可，整体的动画是120帧，轮子会在这120帧中，循环播放，循环4次。</li> <li>如果轮子的动画的loop是false，为了达到相同的效果，轮子的动画长度也得是120帧，这样就会增加轮子动画的帧数据。</li> <li>通过loop和duration的组合可以减少数据，提高效率，提高灵活性。请仔细体会这两个属性的妙处。</li></ul></li></ul> <h2 id="多个动画"><a href="#多个动画" class="header-anchor">#</a> 多个动画</h2> <ul><li>动画节点是个数组，可以包含多个动画，动画有个autoPlay属性，如果一个动画的autoPlay属性是true的话，当这个组件添加上舞台上时，就会自动播放这个动画。</li> <li>如果有多个动画的autoPlay都是true的话，就会只播放第一个autoPlay是true的动画。</li> <li>如果没有一个动画的autoPlay属性是true的话，就不播放任何动画。</li> <li>如果包含多个动画的话，想要播放不同的动画，可是使用<a href="/vf-docs/handbook/action.html#跳转动画">动作脚本</a>的gotoPlay语句进行控制。</li></ul> <h2 id="动画中的事件"><a href="#动画中的事件" class="header-anchor">#</a> 动画中的事件</h2> <ul><li>当组件的一个动画播放完毕时，组件会抛出AnimationComplete事件，如果动画是一个循环动画，每循环一次会抛出AnimationLoopComplete事件
此外用户还可以添加事件时间轴。</li> <li>更多事件相关参见<a href="/vf-docs/handbook/event.html">事件文档</a></li></ul> <h2 id="事件时间轴"><a href="#事件时间轴" class="header-anchor">#</a> 事件时间轴</h2> <ul><li>在一个自定义组件的动画中，可以给事件添加一个时间轴，用来在当动画播放到某一帧时抛出事件，再由<a href="/vf-docs/handbook/action.html#添加监听">VFX</a>监听事件后执行一定的逻辑。</li> <li>事件时间轴的的数据必须加在children节点下，一个动画只能添加一个，id必须是‘event’。</li> <li>event节点下可以添加一个或者多个时间轴，只能添加类型是event的时间轴。</li> <li>event时间轴不能添加loop属性。</li> <li>event时间轴的帧上的帧数据是一个数组，这表示同一时间可以抛出多个事件。</li> <li>数组中的每一项是一个有{type:string, data？:any}结构的对象。</li> <li>type表示事件的类型，data表示事件的数据，也可以没有数据。</li> <li>更多事件相关参见<a href="/vf-docs/handbook/event.html">事件文档</a>。</li> <li>一个事件时间轴的例子：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token property">&quot;autoPlay&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;loadingBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;curve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">100</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">200</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;event&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timelines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;myEvent&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;myEvent&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                            <span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;hisEvent&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;hisEvent&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;frames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token punctuation">{</span>
                                <span class="token property">&quot;frame&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;thisEvent&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;thisEvent&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                            <span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;thatEvent&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;thatEvent&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="路径动画"><a href="#路径动画" class="header-anchor">#</a> 路径动画</h2> <div class="custom-block warning"><p class="custom-block-title">⚠️</p> <p>VF Engine &gt;= v0.5.71</p></div> <p>可沿着一条曲线或直线运动,数据格式：</p> <p>增加<code>type</code>为<code>path</code>的timeline , path属性是一个字符串，格式是 svg 中 path 的 d属性</p> <ul><li>M 表示MoveTo</li> <li>L 表示LineTo，</li> <li>Q表示二次贝塞尔曲线</li> <li>C 表示三次贝塞尔曲线</li></ul> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths" target="_blank" rel="noopener noreferrer">path的格式可参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>注意 路径动画和<code>x</code> , <code>y</code>轴的动画有冲突，两个不可同时使用。</p> <p>path的timeline中的frame的值是0-1之间 表示路径的开始和结束。</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;timelines&quot;: [
      {
          &quot;type&quot;: &quot;path&quot;,
          &quot;path&quot;: &quot;M 60 171 Q 58 181 54 193 Q 26 255 16 277&quot;,
          &quot;loop&quot;: true,
          &quot;frames&quot;: [
              {
                  &quot;frame&quot;: 0,
                  &quot;curve&quot;: [1],
                  &quot;value&quot;: 0
              },
              {
                  &quot;frame&quot;: 600,
                  &quot;value&quot;: 1.0
              }
          ]
      },
]
</code></pre></div><h3 id="动画路径示例"><a href="#动画路径示例" class="header-anchor">#</a> 动画路径示例</h3> <blockquote><p>建设中</p></blockquote> <h2 id="动画模板"><a href="#动画模板" class="header-anchor">#</a> 动画模板</h2> <div class="custom-block warning"><p class="custom-block-title">⚠️</p> <p>VF Engine &gt;= v0.5.71</p></div> <p>在某些课件中，许多图片具有相同的动画，之前的格式，一个动画需要写好多遍，引入动画模板
可以在动画模板中定义一组动画，在其他组件中使用，可以达到一次定义多次使用的目的。</p> <p>数据格式 增加 animationTemplate 节点。类型是 {[id: string]: ISubAnimation};</p> <p>动画的数据修改
之前
export interface IAnimation {
name: string;
duration?: number;
autoPlay?: boolean;
loop?: boolean;
children: { [id: string]: (ISubAnimation) };
}
修改后
export interface IAnimation {
name: string;
duration?: number;
autoPlay?: boolean;
loop?: boolean;
children: { [id: string]: (ISubAnimation | string) };
}</p> <p>IAnimation中的children 即可以是动画的定义，也可以是一个动画模板的名字</p> <h3 id="动画模版示例"><a href="#动画模版示例" class="header-anchor">#</a> 动画模版示例</h3> <blockquote><p>建设中</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">6/30/2020, 11:38:27 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vf-docs/handbook/drag.html" class="prev">
        拖动
      </a></span> <span class="next"><a href="/vf-docs/handbook/filter.html">
        滤镜
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vf-docs/assets/js/app.4298bfd2.js" defer></script><script src="/vf-docs/assets/js/2.402d1a55.js" defer></script><script src="/vf-docs/assets/js/34.f80532ee.js" defer></script>
  </body>
</html>
